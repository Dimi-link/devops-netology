
# Домашнее задание к занятию "1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."



## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

Ответ:
- Аппаратная виртуализация - полная эмуляция процессора, памяти и необходимых перифирийных устройств, в силу чего большие накладные расходы, что может выливаться в уменьшение производительности. Однако данные проблемы отчасти закрываются динамической трансляцией и реализацией аппаратной виртуализации Inet-VT, AMD-V.
- Паравиртулизация - в том числе эмуляция работы устройств, однако гостевая ОС знает о наличии гипервизора, а выполнения привилегированных инструкций происходит через гипервизор, поэтому происходит серьезное изменение ядра гостевой ОС. В силу данной особенности подходит для ОС с открытым кодом, издержки меньше, производительность не особо страдает.
- Виртуализация на основе ОС - еще называется контейнеризация, при помощи механизмов namespace и cgroups, можно выделять новые пространства имен, ограничивать ресурсы хостовой машины, тем самым создавать изолированные контейнеры, в которых будут выполняться процессы. Ядро гостевой ОС не может отличаться от ядра хостовой ОС.
## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

Ответ:
- Высоконагруженная база данных, чувствительная к отказу - **физический сервер**, т.к. из-за отсутствия слоя абстракции виртуализации улучшается отклик подсистемы памяти, повышается быстродействие и нет риска падения гипервизора (или ПО по управлению контейнеризацие типа docker), требуются все ресурсы сервера для максимального быстродействия.
- Различные web-приложения - **виртуализация уровня ОС (контейнеры)**, требуется минимальное количество ресурсов, можно легко масштабировать, простота администрирования (при "падении" контейнера, за работу берется копия, например).
- Windows системы для использования бухгалтерским отделом - **паравиртулизация**, если с системой работает небольшое количество сотрудников и происходит относительно небольшое количество обращений к БД, и **физический сервер**, если паравиртуализация не отвечает требованиям быстродействия.
- Системы, выполняющие высокопроизводительные расчеты на GPU - **физический сервер**, если требуется высокая производительность и прямой доступ к аппаратным ресурсам или **аппаратная виртуализация**, если требуется разделение ресурсов между сотрудниками (например у WMWare есть решение для разделения физической видеокарты для рабочих станций на логические).
## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
- Ответ: **vSphere** - вроде все может из коробки
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
- Ответ: **KVM** - бесплатный, open source, не заброшен
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
- Ответ: **Hyper-V** - родной продукт Microsoft
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.
- Ответ: **Virtualbox** - можно быстро разворачивать с помощью Vagrant

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

Ответ: увеличивается сложность управления виртуальными машинами в такой среде (обслуживание, перемещение), невозможно передать дополнительные ресурсы с другого сервера. Лучше когда виртуальная инфраструктура организована в одной среде, тогда администрирование гораздо проще, удобнее и дешевле.
